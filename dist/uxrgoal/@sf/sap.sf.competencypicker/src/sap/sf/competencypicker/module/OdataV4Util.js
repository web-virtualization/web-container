sap.ui.define(["sap/ui/thirdparty/jquery","sap/sf/surj/shell/util/DeferredUtil","sap/base/Log","sap/ui/model/resource/ResourceModel"],function(e,t,a,r){"use strict";var o=function(){};o.GetLibraries=function(e,a){var r={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{competencyIds:e.filterByCompetencyDetails.competencyIds,behaviorIds:e.filterByCompetencyDetails.behaviorIds,libraryCategoryMap:e.filterByCompetencyDetails.libraryCategoryMap,locale:e.filterByCompetencyDetails.locale,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getLibraryNameAndFilterAction"};var o=t.invokeService(r);o.then(function(e){if(e){var t=[];var r=[];if(e.libraryNames&&e.libraryNames.length>0){e.libraryNames.forEach(function(e){t.push({text:e,icon:"sap-icon://course-book",nodes:[{}]})})}e.libraryNames=t;e.filterIds=e.filterIds;a.resolve(e)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetFamilies=function(e,a,r){var o={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{filterIds:r,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getFamilyNamesAction"};var i=t.invokeService(o);i.then(function(e){if(e){var t=[];if(e&&e.value&&e.value.length>0){e.value.forEach(function(e){t.push({text:e,icon:"sap-icon://course-book",nodes:[{}]})})}a.resolve(t)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetSelectedCompetencies=function(e,a){var r={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{competencyIds:e.selectedIds},servicePath:"/getCompetencyDetailsByIdsAction"};var o=t.invokeService(r);o.then(function(t){if(t&&t.value&&t.value.length>0){var r=[];if(!e.useBehavior){t.value.forEach(function(e){r.push({name:e.competencyName,internalId:e.competencyInternalId,compSelected:true})})}a.resolve(r)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetSelectedBehaviors=function(e,a){var r={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{behaviorIds:e.selectedIds},servicePath:"/getBehaviorDetailsByIdsAction"};var o=t.invokeService(r);o.then(function(t){if(t&&t.value&&t.value.length>0){var r=[];if(e.useBehavior){t.value.forEach(function(e){r.push({name:e.behaviorName,internalId:e.behaviorInternalId,compSelected:true})})}a.resolve(r)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetCategories=function(e,a,r,o){var i={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{filterIds:o,libraryName:r,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getCategoryByLibraryAndFilterAction"};var n=t.invokeService(i);n.then(function(e){if(e&&e.value&&e.value.length>0){var t=[];e.value.forEach(function(e){t.push({libraryName:r,text:e,nodes:[{}]})});a.resolve(t)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetRoles=function(e,a,r,o){var i={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{familyName:o,filterIds:r,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getRoleNamesAction"};var n=t.invokeService(i);n.then(function(e){if(e&&e.value&&e.value.length>0){var t=[];e.value.forEach(function(e){t.push({familyName:o,text:e.roleName,roleId:e.roleId,competencyIds:e.competencyIds,nodes:[{}]})});a.resolve(t)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetCompetencies=function(e,a,r,o,i){var n={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{filterIds:i,libraryName:r,categoryName:o,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getCompetencyByLibraryCategoryAndFilterAction"};var c=t.invokeService(n);c.then(function(t){if(t&&t.value&&t.value.length>0){var i=[];if(!e.useBehavior){i.push({libraryName:r,categoryName:o,count:t.value.length,internalId:"selectAllId"});t.value.forEach(function(e){i.push({libraryName:r,categoryName:o,name:e.competencyName,internalId:e.competencyInternalId})})}else{t.value.forEach(function(e){i.push({libraryName:r,categoryName:o,text:e.competencyName,competencyId:e.competencyInternalId,nodes:[{}]})})}a.resolve(i)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetCompetencyDetailsByIds=function(e,a,r,o,i,n){var c={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{roleId:n,filterIds:i,useBehavior:e.useBehavior,selectionByCoreCompetency:e.selectionByCoreCompetency},servicePath:"/getCompetencyByIdAndFilterAction"};var s=t.invokeService(c);s.then(function(t){if(t&&t.value&&t.value.length>0){var i=[];if(!e.useBehavior){i.push({familyName:r,roleName:o,count:t.value.length,internalId:"selectAllId"});t.value.forEach(function(e){i.push({familyName:r,roleName:o,roleId:n,name:e.competencyName,internalId:e.competencyInternalId})})}else{t.value.forEach(function(e){i.push({familyName:r,roleName:o,roleId:n,text:e.competencyName,competencyId:e.competencyInternalId,nodes:[{}]})})}a.resolve(i)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.GetBehaviors=function(e,a,r,o,i,n,c){var s={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{filterIds:n,competencyId:e},servicePath:"/getBehaviorByCompetencyIdAndFilterAction"};var l=t.invokeService(s);l.then(function(e){if(e&&e.value&&e.value.length>0){var t=[];var t=[{libraryName:r,categoryName:o,competencyName:i,count:e.value.length,internalId:"selectAllId"}];e.value.forEach(function(e){t.push({libraryName:r,categoryName:o,competencyName:i,name:e.behaviorName,internalId:e.behaviorInternalId,roleId:c})});a.resolve(t)}else{a.resolve([])}},function(e,t){a.reject(e,t)});return a.promise()};o.Search=function(e,a){var r={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{searchRequest:a},servicePath:"/searchAction"};var o=t.invokeService(r);o.then(function(t){if(t&&t.resultByCategories&&t.resultByCategories.length>0){var r=[];t.resultByCategories.forEach(function(e){e.nodes=[{}];r.push({text:e.categoryName,nodes:[{}],libraryName:e.libraryName})});t.resultByCategories=r}if(t&&t.resultByLibraries&&t.resultByLibraries.length>0){var o=[];t.resultByLibraries.forEach(function(e){o.push({text:e,icon:"sap-icon://course-book",nodes:[{}]})});t.resultByLibraries=o}if(t&&t.resultByCompetencies&&t.resultByCompetencies.length>0){var i=[];if(!a.useBehavior){t.resultByCompetencies.forEach(function(e){i.push({libraryName:e.libraryName,categoryName:e.categoryName,name:e.competencyName,internalId:e.competencyInternalId})})}else{t.resultByCompetencies.forEach(function(e){i.push({libraryName:e.libraryName,categoryName:e.categoryName,text:e.competencyName,competencyId:e.competencyInternalId,nodes:[{}]})})}t.resultByCompetencies=i}if(t&&t.resultByBehaviors&&t.resultByBehaviors.length>0){var n=[];t.resultByBehaviors.forEach(function(e){n.push({libraryName:e.libraryName,categoryName:e.categoryName,competencyName:e.competencyName,name:e.behaviorName,internalId:e.behaviorInternalId})});t.resultByBehaviors=n}e.resolve(t)},function(t,a){e.reject(t,a)});return e.promise()};o.SearchByRole=function(e,a){var r={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{searchByRoleRequest:a},servicePath:"/searchByRoleAction"};var o=t.invokeService(r);o.then(function(t){if(t&&t.resultByRoles&&t.resultByRoles.length>0){var r=[];t.resultByRoles.forEach(function(e){e.nodes=[{}];r.push({text:e.roleName,nodes:[{}],competencyIds:e.competencyIds,familyName:e.familyName,roleId:e.roleId})});t.resultByRoles=r}if(t&&t.resultByFamilies&&t.resultByFamilies.length>0){var o=[];t.resultByFamilies.forEach(function(e){o.push({text:e,icon:"sap-icon://course-book",nodes:[{}]})});t.resultByFamilies=o}if(t&&t.resultByCompetencies&&t.resultByCompetencies.length>0){var i=[];if(!a.useBehavior){t.resultByCompetencies.forEach(function(e){i.push({familyName:e.familyName,roleName:e.roleName,roleId:e.roleId,name:e.competencyName,internalId:e.competencyInternalId})})}else{t.resultByCompetencies.forEach(function(e){i.push({familyName:e.familyName,roleName:e.roleName,roleId:e.roleId,text:e.competencyName,competencyId:e.competencyInternalId,nodes:[{}]})})}t.resultByCompetencies=i}if(t&&t.resultByBehaviors&&t.resultByBehaviors.length>0){var n=[];t.resultByBehaviors.forEach(function(e){n.push({familyName:e.familyName,roleName:e.roleName,roleId:e.roleId,competencyName:e.competencyName,name:e.behaviorName,internalId:e.behaviorInternalId})});t.resultByBehaviors=n}e.resolve(t)},function(t,a){e.reject(t,a)});return e.promise()};o._getRequestObject=function(t,a){var r={competencyIds:[],behaviorIds:[],libraryCategoryMap:[],locale:""};if(t.filterByCompetencyDetails){if(t.filterByCompetencyDetails.competencyIds){r.competencyIds=t.filterByCompetencyDetails.competencyIds}if(t.filterByCompetencyDetails.behaviorIds){r.behaviorIds=t.filterByCompetencyDetails.behaviorIds}if(t.filterByCompetencyDetails.libraryCategoryMap){r.libraryCategoryMap=t.filterByCompetencyDetails.libraryCategoryMap}if(t.filterByCompetencyDetails.locale){r.locale=t.filterByCompetencyDetails.locale}}var o={type:"ODataService",baseUrl:"/odata/v4",serviceName:"/JpbAdoptionOdataService.svc",method:"POST",data:{requestBody:r}};e.extend(true,o,a);return o};return o});