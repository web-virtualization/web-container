sap.ui.define('sap/sf/surj/shell/util/LinkUtil',['jquery.sap.global','sap/sf/surj/shell/util/SMRF','sap/sf/surj/shell/util/Util'],function($,S,U){"use strict";var L={gotoURL:function(u,d,w){var h=u.indexOf('#');if(!d&&h!=0){var s='_s.crb=';if(window.ajaxSecKey&&u&&(u.indexOf('javascript:')!=0)&&(u.indexOf(s)<0)){var q=u.indexOf('?');if(h>=0&&q>h){q=-1;}var a="";if(h>=0){a=u.substring(h);u=u.substring(0,h);}u+=((q<0)?'?':'&')+s+window.ajaxSecKey+a;}g(u);}else{L.secureUrl(u,true).then(function(b){g(b);});}function g(b){try{if(w){window.open(b,w.name||'_blank',w.specs||'menubar=1,location=1,status=1,resizable=1,scrollbars=1',w.replace);}else{window.location.href=b;}}catch(e){}}},handle:function(l){if(typeof l)var o=l.onclick;var u=l.url;if(o&&typeof o=='string'){U.dangerouslyEvalScript("(function(){"+U.maybeUnescapePlainText(o)+"})()");}else if(typeof o=='function'){o();}else if(typeof u=='string'){var w=undefined;if(l.target=='_blank'){w={};}this.gotoURL(u,false,w);}},isSecureRequired:function(u){return!U.isBizXDomain(u)&&u.indexOf(U.getLocationOrigin())!==0&&u.match(/^https?:?\/\//);},secureUrl:function(u,a){var r,b;function h(){if(window.secureUrl){return secureUrl(u);}else if(!L.isSecureRequired(u)){return u;}else if(a){S.loadPromise(['/ui/juic/js/GlobalFunctions.js']).then(function(){r(secureUrl(u));},b);}else{S.loadSync(['/ui/juic/js/GlobalFunctions.js']);return secureUrl(u);}}if(a){return new Promise(function(c,d){r=c;b=d;var v=h();if(v!=null){r(v);}});}return Promise.resolve(h());},};$.sap.setObject('sap.sf.surj.shell.util.LinkUtil',L);return L;});
