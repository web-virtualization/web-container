sap.ui.define('sap/sf/surj/shell/util/PeopleSearchUtil',['jquery.sap.global','sap/sf/surj/shell/util/Util','sap/sf/surj/shell/util/SearchUtil','sap/sf/surj/shell/util/LinkUtil','sap/sf/surj/shell/util/DeferredUtil',],function($,U,S,L,D){var c=sap.ui.getCore();S.register('People',{search:function(C){var p=0;if(C.actionId){}else{return d(C,p,{});}},getExternalSearchUrl:function(C){var p={};p[a]=C.searchValue;return U.ensureBaseDomain(E+'?'+$.param(p));},selectItem:function(i){var u=i.item;var p={};if(u.userId||u.userIdEncoded){var o=window.pageHeaderJsonData;var s=o&&o.settings;var e=s&&s.encryptUserIdInURLEnabled=='true';if(!e){e=$('#encryptUserIdInURLEnabled').attr('content')=='true';}if(e){p.selected_user_encoded=u.userIdEncoded;}else{p.selected_user=u.userId;}}else{return this.externalSearch();}L.gotoURL(U.ensureBaseDomain(P+'?'+$.param(p)));}});var E='/sf/directory';var P='/xi/ui/pages/empfile/liveprofile.xhtml';var a='peopleSearchString';var A={type:'ajaxService',module:'hris',serviceName:'quickcardController',serviceMethod:'searchUser'};var b={adminPage:'false',findtype:'fullname',groupId:'0',includeExternalUsers:'true',includeInactive:false,m:'quickcard',maxresults:10};function d(C,p,o){var r=$.extend({},b,{searchValue:C.searchValue,page:p+1,maxresults:C.maxresults,keys:C.keys});var s=o.lastIndex;if(s===0||isNaN(s)){s=p*r.maxresults;}else{s++;}r.startIndex=s;return D.createDeferred($.extend({arguments:[r]},A)).then(function(R){var t=o.totalCount;if(t==null){t=o.totalCount=R.totalCount;}var I=R.items;var e=(I&&I.length)||0;var l=0;if(e>0){for(var i=0;i<e;i++){var f=I[i];var g=f.indexRef;if(g>l){l=g;}}}o.lastIndex=l;var T=o.totalReturned=(o.totalReturned||0)+e;var h=e>0&&T<t;return{type:'People',items:I,totalCount:t,hasMore:h,more:h?function(){return d(C,p+1,o);}:null};});}});
