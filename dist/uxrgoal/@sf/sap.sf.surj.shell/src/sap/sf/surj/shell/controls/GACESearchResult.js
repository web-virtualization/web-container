jQuery.sap.declare("sap.sf.surj.shell.controls.GACESearchResult");jQuery.sap.require("sap.sf.surj.shell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.sf.surj.shell.controls.GACESearchResult",{metadata:{library:"sap.sf.surj.shell"}});sap.ui.define('sap/sf/surj/shell/controls/GACESearchResult',['jquery.sap.global','sap/ui/core/Control','sap/ui/core/Icon','sap/sf/surj/shell/util/SearchUtil','sap/sf/surj/shell/controls/UserPhoto'],function($,C,I,S,U,B){'use strict';var T=/^(true|yes|y)$/i;var r=sap.ui.getCore().getLibraryResourceBundle('sap.sf.surj.shell.i18n');return C.extend('sap.sf.surj.shell.controls.GACESearchResult',{metadata:{library:'sap.sf.surj.shell',properties:{text:'string',searchValue:'string',resultScope:'string',personItem:'any',photoSrc:'sap.sf.surj.shell.controls.UserPhotoSrc',settings:'object'},aggregations:{_userPhoto:{type:'sap.sf.surj.shell.controls.UserPhoto',visibility:'hidden',multiple:false}}},renderer:function(R,l){var u=l.getAggregation('_userPhoto');var s=l.getSearchValue();var o=l.getSettings();var p=l.getPersonItem();var e=p.employments||[];var a=p.userName;var A='COMMON_Person_AutoComplete_Alternate_Employment';R.write('<div');R.writeControlData(l);R.addClass('surjresult surjGaceResultImg'+(p.subItem&&!p.firstSubItem?' surjGaceResultFrame':''));R.writeClasses();R.write('>');R.write('<div class="surjGacePhotoFrame">');if(u){R.renderControl(u);}R.write('</div>');R.write('<div>');R.write('<div class="surjcontent surjGaceTitle">');var b=(o&&o.additionalCriteria)||{};var c=b.resultScope;if(!p.subItem||p.firstSubItem){var t=S.getHighlightedMarkup(p.name,s,'<em class="surjhighlight surjAutoCompleteHighlight">','</em>');R.write('<div class="surj-peui-name">',t);if(a&&a!=null&&jQuery('#autocomplete\\.hideUserName').attr('content')!='true'){R.write('<span>');R.write(" "+r.getText('COMMON_PARENTHETICAL_PHRASE',$.sap.escapeHTML(a)));R.write('</span>');}if(c&&c.toUpperCase()=="PERSON"){if(p.isActive=="false"){var i=r.getText('COMMON_InActive');R.write('<span class="surjGACEInactive">');R.writeEscaped(" "+r.getText('COMMON_PARENTHETICAL_PHRASE',[i]));R.write('</span>');}}R.write('</div>');R.write('</div>');}if(c&&c.toUpperCase()=="PERSON"){if(p.email){R.write('<div class="surjGACEEmail">');R.writeEscaped(p.email);R.write('</div>');}l._renderContingentLabel(R,p.isContingentWorker);}else{e.forEach(function(E,d){var f=null;var n="surj-peui-title";if(p.hasEmploymentDifferentiatorText===true){f=r.getText('COMMON_Person_AutoComplete_DiffText',[E.employmentDifferentiatorText]);}else{f=E.title;var L=E.locationName;if(L){if(!l.isEmpty(f)&&!l.isEmpty(L)){f=r.getText('COMMON_Person_AutoComplete_Title_And_Location',[f,L]);}else if(!l.isEmpty(f)){f=r.getText('COMMON_Person_AutoComplete_DiffText',[f]);}else if(!l.isEmpty(L)){f=r.getText('COMMON_Person_AutoComplete_DiffText',[L]);}else{f=l.displayEmptyWhenOneEmployment(p,r.getText(A));}}}var g=new I({src:l.getIcon(E,o)}).addStyleClass('surjGACEIcon');var h=r.getText('COMMON_Search_No_Information_Placeholder');if(f==h||l.isEmpty(f)){f=l.displayEmptyWhenOneEmployment(p,r.getText(A));}R.write('<div class='+n+'>');R.write('<span class="surj-empDiffColumn1">'+f+'</span>');if(E.isActive=="false"){var i=r.getText('COMMON_InActive');R.write('&nbsp;');R.write('<span class="surjGACEInactive">');R.writeEscaped(r.getText('COMMON_PARENTHETICAL_PHRASE',[i]));R.write('</span>');}if(E.showIcon){g.addStyleClass("surj-sempDiffColumn2");R.renderControl(g);}R.write('</div>');l._renderContingentLabel(R,E.isContingentWorker);});}R.write('</div></div></div>');},displayEmptyWhenOneEmployment:function(p,t){if(p['firstSubItem']&&p['lastSubItem']){return'&nbsp;';}return t;},isEmpty:function(t){return t==null||t==="";},_renderContingentLabel:function(R,i){if(i==='Y'){R.write('<div class="surj-result-cgt">');R.writeEscaped(r.getText('COMMON_Contingent_Worker'));R.write('</div>');}else if(i==='?'){var o=new I({src:'sap-icon://sys-help'}).addStyleClass('surj-result-cgt-noAuth');o.setTooltip(r.getText('COMMON_Contingent_Worker_No_Permission_Info'));R.renderControl(o);}},getIcon:function(e,s){if(e.employmentType=="GA"){if(e.isHomeAssignment=="true"){return"sap-icon://home";}else{return"sap-icon://world";}}else if(e.employmentType=="ST"&&e.isHomeAssignment=="true"){return"sap-icon://home";}else if(T.test(e.isPrimaryEmployment)&&s&&s.additionalCriteria&&T.test(s.additionalCriteria.includeSecondEmpl)){return"sap-icon://favorite";}},setPhotoSrc:function(p){var u=this.getAggregation('_userPhoto');if(u){if(p){u.setPhotoSrc(p);}else{u.destroy();}}else if(p){this.setAggregation('_userPhoto',new U({profile:{},user:{photoSrc:p}}));}return this.setProperty('photoSrc',p);}});});
