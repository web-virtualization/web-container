jQuery.sap.declare("sap.sf.surj.shell.controls.PeopleSuggestionItem");jQuery.sap.require("sap.sf.surj.shell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.sf.surj.shell.controls.PeopleSuggestionItem",{metadata:{library:"sap.sf.surj.shell"}});sap.ui.define(['jquery.sap.global','sap/m/SuggestionItem','./UserPhoto'],function($,S,U){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle('sap.sf.surj.shell.i18n');var P=S.extend('sap.sf.surj.shell.controls.PeopleSuggestionItem',{metadata:{properties:{user:'sap.sf.surj.shell.controls.UserInfo',sectionTitle:'string',highlightedText:'string',enablePhoto:'boolean'},aggregations:{_userPhoto:{type:'sap.sf.surj.shell.controls.UserPhoto',multiple:false,visibility:'hidden'}}},getA11yAnnouncement:function(){var u=this.getUser();var s=u.userName;var k=u.keys;var t=k&&k.TITLE;var p=k&&k.PHONE;var A=[];A.push(this.getSuggestionText());if(s){A.push(r.getText('COMMON_PARENTHETICAL_PHRASE',[s]));}if(u.contingentWorker||u.isContingentWorkerString=="Y"){A.push(r.getText('COMMON_Contingent_Worker'));}if(u.multipleAssignment){t=r.getText('ACTIONSEARCH_Multiple_Assignments');}if(u.multipleEmployment){t=r.getText('ACTIONSEARCH_Multiple_Employments');}if(u.isActive==='false'){t=t||'';t=r.getText('COMMON_User_Name_Inactive',[t]);}t&&A.push(t);if(p){A.push(r.getText('COMMON_GlobalSearch_Announcement_PhoneNumber',[p]));}return A.join(' ');},setUser:function(u){var p=$.extend({},u);var b=window.pageHeaderJsonData;var s=b&&b.settings;var i=s&&(s.encryptUserIdInURLEnabled=="true");if(!p.photoSrc){var c={urlType:'eduPhoto',photoType:'liveProfile',mod:u.imageMod};if(i){c.userIdEncoded=u.userIdEncoded;}else{c.userId=u.userId;}p.photoSrc=c;}this.setAggregation('_userPhoto',new U({profile:{},user:p}));this.setProperty('user',u,false);this.setText(u.name);}});function a(R,t,s){var i;if(t){i=t.toUpperCase().indexOf(s.toUpperCase());if(i>-1){R.writeEscaped(t.slice(0,i));R.write('<b>');R.writeEscaped(t.slice(i,i+s.length));R.write('</b>');t=t.substring(i+s.length);}R.writeEscaped(t);}}P.prototype.render=function(R,i,s,b){var c=R;var u=i.getUser();var n=u.name;var d=u.userName;var k=u.keys;var t=k&&k.TITLE;var p=k&&k.PHONE;var e=i.getDescription();s=s||'';var f=this.getEnablePhoto();var o=i.getAggregation('_userPhoto');var g=i.getSectionTitle();if(g){c.write('<div class="bizXSuggestionTitle">');c.writeEscaped(g);c.write('</div>');}c.write('<li');c.writeElementData(i);c.writeAttribute('role','option');c.writeAttribute('role','listitem');c.addClass('bizXSuggestionItem');c.addClass('bizXPeopleSuggestionItem');if(f&&o){c.addClass('bizXPSIHasPhoto');}if(u.contingentWorker||u.isContingentWorkerString=="Y"){c.addClass('bizXPSIHasTags');}c.addClass('sapMSuLI');c.addClass('sapMSelectListItem');c.addClass('sapMSelectListItemBase');c.addClass('sapMSelectListItemBaseHoverable');if(b){c.addClass('sapMSelectListItemBaseSelected');c.writeAttribute('aria-selected','true');}c.writeClasses();c.write('>');if(f&&o){c.renderControl(o);}c.write('<div class="bizXPSINameWrap">');if(u.contingentWorker||u.isContingentWorkerString=="Y"){c.write('<div class="bizXPSIContingent">');c.writeEscaped(r.getText('COMMON_Contingent_Worker'));c.write('</div>');}if(p){c.write('<span class="bizxPSIPN">');c.writeEscaped(p);c.write('</span>');}c.write('<span class="bizxPSIN">');a(c,n,i.getHighlightedText()||s);if(d){c.write(' <span class="bizxPSIUn">');c.write(r.getText('COMMON_PARENTHETICAL_PHRASE',[$.sap.escapeHTML(d)]));c.write('</span>');}c.write('</span>');if(u.multipleAssignment){t=r.getText('ACTIONSEARCH_Multiple_Assignments');}if(u.multipleEmployment){t=r.getText('ACTIONSEARCH_Multiple_Employments');}if(u.isActive==='false'){t=t||'';t=r.getText('COMMON_User_Name_Inactive',[t]);}if(t){c.write('<span class="bizxPSIT">');c.writeEscaped(t);c.write('</span>');}c.write('</div>');c.write('</li>');};return P;});
