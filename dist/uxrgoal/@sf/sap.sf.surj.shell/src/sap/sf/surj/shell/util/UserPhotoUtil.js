sap.ui.define(['./Util','./NameFormatter'],function(U,N){'use strict';var a={localpicture:{photoAction:'ps_p_action',photoType:'p_type',userId:'ps_p_uid'},eduPhoto:{photoAction:'photo_action',photoType:'photo_type',userId:'user_id',userIdEncoded:'user_id_encoded'}};var P={photoType:'quickCard',photoAction:'show'};var b={globalPhotoCacheEnabled:null,globalInvalidateCache:new Date().getTime(),formatUserPhotoSimple:function(u,p){return b.formatUserPhoto({urlType:'eduPhoto',photoType:p,userId:u});},formatEduPhoto:function(){return b.formatUserPhoto.apply(b,Array.prototype.slice(arguments).concat([{urlType:'eduPhoto'}]));},formatUserPhoto:function(v){function f(s){for(var i=0;i<A.length;i++){var g=A[i];if(g&&g[s]!=null){return g[s]}}}if(typeof v=='string'){return v;}var A=arguments,u=f('urlType')||'localpicture',p=a[u];if(!p){throw new Error("Invalid urlType: "+u);}var c=f('companyId');if(!c){if(window.pageHeaderJsonData){c=pageHeaderJsonData.companyId;}if(!c){var o=sap.ui.getCore().getModel('pageHeader');c=o&&o.getProperty('/companyId');}}var d={};if(c){d.companyId=c;}Object.keys(p).forEach(function(s){var g=p[s],V=f(s)||P[s];if(V){d[g]=V;}});var e=f('clientPhotoCachingEnabled');if(e||(e==null&&b.isPhotoCachingEnabled())){d.mod=f('mod')||'';var E=f('expires');if(typeof E=='number'){d.expires=E;}}else{d.invalidateCache=f('invalidateCache')||b.globalInvalidateCache;}return U.ensureBaseDomain('/'+u+'/view'+Object.keys(d).reduce(function(q,s){return q+(q?'&':'?')+encodeURIComponent(s)+'='+encodeURIComponent(d[s]);},''));},getPhotoMod:function(p,i){if(p&&i){return p+"_"+i;}else{return"";}},isPhotoCachingEnabled:function(){var g=b.globalPhotoCacheEnabled;if(typeof g=='boolean'){return g;}var p=window.pageHeaderJsonData;var s=p&&p.settings;if(s){g=(String(s.clientPhotoCachingEnabled)=='true');}else{var m=document.getElementById('clientPhotoCachingEnabled');g=m&&m.content=='true';}return b.globalPhotoCacheEnabled=!!g;},formatInitials:function(u){var i=[];if(typeof u=='string'){u={fullName:u};}if(u){var f=N.isFirstNameFirst();var F=u.firstName||u.fn;var l=u.lastName||u.ln;var s=u.fullName||u.defaultFullName;var c=F&&(F.charAt(0));var L=l&&(l.charAt(0));c&&i.push(c);L&&i.push(L);if(!f&&i.length>1){i.reverse();}if(i.length==0&&s){var d=u.fullName.match(/\b(\w)/g);if(!d){d=u.fullName.match(/^\s*\S/g);}if(d){i=d.slice(0,2);}else{i=s.charAt(0);}}}return i.map(function(I){return I.toUpperCase();}).join('');},formatFullName:function(u){if(!u){return null;}var f=u.defaultFullName;if(!f){f=N.format(u);}return f;}};return b;});
