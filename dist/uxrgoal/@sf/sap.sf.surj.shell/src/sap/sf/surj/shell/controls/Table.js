jQuery.sap.declare("sap.sf.surj.shell.controls.Table");jQuery.sap.require("sap.sf.surj.shell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.sf.surj.shell.controls.Table",{metadata:{library:"sap.sf.surj.shell"}});
/*!
 * ${copyright}
 */
sap.ui.define(['jquery.sap.global','sap/m/Table'],function($,M){'use strict';var R='surjTableWithResizingColumn';var a='resizingColumn';var b=8;var c='\ue24f';var T=M.extend('sap.sf.surj.shell.controls.Table',{renderer:{},metadata:{properties:{useResizableColumns:{type:'boolean',defaultValue:true}}},constructor:function(){M.apply(this,arguments);this._initColumnResize=this._initColumnResize.bind(this);this.addStyleClass('surjTable');},destroy:function(){M.prototype.destroy.apply(this,arguments);this._initColumnResize=null;},onAfterRendering:function(){M.prototype.onAfterRendering.apply(this,arguments);if(this.getUseResizableColumns()){this._initColumnResize();}return this;},_initColumnResize:function(){var C=this.getColumns();var w,I,d;for(var o,i=0;i<C.length;i++){o=C[i];d=o.$();if(d.hasClass(T.RESIZABLE_COLUMN_CLASS_NAME)){o.data('surj-resize-icon',c,true);w=parseInt(o.getWidth(),10);if(!w){w=d.width();o.setWidth(w+'px',true);}I=o.data('initialWidth');if(!I){I=o.getWidth();o.data('initialWidth',I);}this._applyColumnResizeHandlers({$col:o.$(),$this:this.$(),oCol:o,sInitialWidth:I,iWidth:w});}}return this;},_applyColumnResizeHandlers:function(s){s.bPressed=false;s.iX=null;s.iX0=null;s.iCrtWidth=s.iWidth;s.onColumnMouseMove=this._onColumnResizingMouseMove.bind(this,s);s.onColumnResizingMouseUp=this._onColumnResizingMouseUp.bind(this,s);s.$col.on('dblclick',this._onColumnDoubleClick.bind(this,s)).on('mousedown',this._onColumnMouseDown.bind(s.oCol.getDomRef(),s));return this;},_onColumnDoubleClick:function(s,d){s.$col.width(s.sInitialWidth);s.oCol.setWidth(s.sInitialWidth,true);s.iX=s.iX0=null;s.iCrtWidth=s.iWidth;s.bPressed=false;d.stopPropagation();return false;},_onColumnMouseDown:function(s,d){var S=window.getComputedStyle?window.getComputedStyle(this,null):this.currentStyle;var o=S?d.offsetX+parseInt(S.paddingRight,10):d.offsetX;if(o>=(this.offsetWidth-b)&&o<=this.offsetWidth){s.iX=s.iX0=d.pageX-s.$this.rect().left;s.iCrtWidth=s.$col.width();s.bPressed=true;s.$this.on('mousemove',s.onColumnMouseMove).on('mouseup',s.onColumnResizingMouseUp);d.stopPropagation();}return false;},_onColumnResizingMouseMove:function(s,d){if(s.bPressed){s.$this.addClass(R);s.$col.addClass(a);s.iX=d.pageX-s.$this.rect().left;s.iCrtWidth=s.iWidth+(s.iX-s.iX0);(s.iCrtWidth<b)&&(s.iCrtWidth=b);if(Math.abs(s.iWidth-s.iCrtWidth)>b){s.$col.width(s.iCrtWidth);}d.stopPropagation();}return false;},_onColumnResizingMouseUp:function(s,d){if(s.bPressed){s.iX=d.pageX-s.$this.rect().left;s.iCrtWidth=s.iWidth+(s.iX-s.iX0);(s.iCrtWidth<b)&&(s.iCrtWidth=b);if(Math.abs(s.iWidth-s.iCrtWidth)>b){s.$col.width(s.iCrtWidth);s.oCol.setWidth(s.iCrtWidth+'px',true);}d.stopPropagation();}s.$col.removeClass(a);s.$this.removeClass(R).off('mousemove',s.onColumnMouseMove).off('mouseup',s.onColumnResizingMouseUp);s.iX=null;s.iWidth=null;s.bPressed=false;return false;}});T.RESIZABLE_COLUMN_CLASS_NAME='surjTableResizableColumn';return T;});
