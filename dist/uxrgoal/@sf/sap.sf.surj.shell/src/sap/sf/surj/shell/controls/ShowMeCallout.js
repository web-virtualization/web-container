jQuery.sap.declare("sap.sf.surj.shell.controls.ShowMeCallout");jQuery.sap.require("sap.sf.surj.shell.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.sf.surj.shell.controls.ShowMeCallout",{metadata:{library:"sap.sf.surj.shell"}});sap.ui.define('sap/sf/surj/shell/controls/ShowMeCallout',['sap/ui/core/Control','sap/ui/layout/HorizontalLayout','sap/ui/layout/VerticalLayout','sap/sf/surj/shell/controls/Container','sap/m/Popover','sap/m/Image','sap/m/Link','sap/m/Text','sap/m/Button'],function(C,H,V,a,P,I,L,T,B){"use strict";var r=sap.ui.getCore().getLibraryResourceBundle('sap.sf.surj.shell.i18n');var b={width:'120px',height:'90px'};var M='manage';var c='author';var d='play';var e=sap.ui.resource('sap.sf.surj.shell.img.showme','');var h=e+'show_me_how_to_thumb.jpg';var v=e+'video_play.png';var s=e+'showme_admin_done_bar.png';return C.extend('sap.sf.surj.shell.controls.ShowMeCallout',{metadata:{properties:{modality:{type:'string',default:d},isMobile:{type:'boolean',default:false},thumbUrl:{type:'string',default:''},videoTitle:{type:'string',default:''},videoDesc:{type:'string',default:''},isDraft:{type:'boolean',default:false},useDefaultContent:{type:'boolean',default:false}}},setEventHandler:function(f){this._eventHandlerFn=f;},openBy:function(o){if(!this._callout){this._callout=new P({showHeader:false,placement:"Bottom",content:this._createContent(),footer:this._createFooter(),}).addStyleClass('surjShowMECO');}this._callout.openBy(o);},isOpen:function(){return this._callout&&this._callout.isOpen();},close:function(){if(this._callout){this._callout.close();}},_createContent:function(){var t=this;var f;if(this.getModality()==c){this.setThumbUrl(h);f='playShowMeAuthorHelp';}else{f='playShowMe';}return new H({content:[new a({content:[new I({src:t.getThumbUrl(),width:b.width,height:b.height,press:function(){t._eventHandlerFn({action:f});}}),new I({src:v,press:function(){t._eventHandlerFn({action:f});}}).addStyleClass('surjShowMeCOVideoPlayButton')]}).addStyleClass('surjShowMeThumb'),t.getModality()==c?t._createContentAuthor():t._createContentPlay()]}).addStyleClass('surjShowMeCOContent');},_createContentPlay:function(){var t=this;return new V({content:[new L({text:t.getVideoTitle(),press:function(){t._eventHandlerFn({action:'playShowMe'});}}),new T({text:t.getVideoDesc().replace(/\n/g,'<br>')})]}).addStyleClass('surjShowMeCOText');},_createContentAuthor:function(){var t=this;var f=[];if(!this.getIsMobile()){f.push(new T({text:r.getText('COMMON_SHOW_ME_AUTHOR_WELCOME')}));f.push(new a({content:this._formatMessage(r.getText('COMMON_SHOW_ME_LEARN_MORE'),function(){t._eventHandlerFn({action:'playShowMeAuthorHelp'});})}).addStyleClass('surjShowMeFormattedMsgContainer'));f.push(new B({text:r.getText('COMMON_SHOW_ME_AUTHOR_LINK'),press:function(){t._eventHandlerFn({action:'recordShowMe'});}}));}else{f.push(new T({text:r.getText('COMMON_SHOW_ME_MOBILE_AUTHOR')}));}return new V({content:f}).addStyleClass('surjShowMeCOText');},_createFooter:function(){var t=this;var f=[new L({text:r.getText('COMMON_DONT_SHOW_AGAIN'),press:function(){t._eventHandlerFn({action:'notAgain',flag:true});}}).addStyleClass('surjShowMeCOFooterDontShowLink')];if(this.getModality()==M){var m;if(!this.getIsMobile()){if(this.getIsDraft()){m=r.getText('COMMON_SHOW_ME_NOT_PUBLISHED');}else if(this.getUseDefaultContent()){m=r.getText('COMMON_SHOW_ME_MANAGE_DEFAULT_VIDEO');}else{m=r.getText('COMMON_SHOW_ME_MANAGE_VIDEO');}}else{m=r.getText('COMMON_SHOW_ME_MOBILE_MANAGE_VIDEO');}f.push(new V({content:[new I({src:s,width:'100%'}),new a({content:t._formatMessage(m,function(){t._eventHandlerFn({action:'manageShowMe'});})}).addStyleClass('surjShowMeCOFooterMsgContainer surjShowMeFormattedMsgContainer')]}).addStyleClass('surjShowMeCOFooterMain'));}return new V({width:'400px',content:f}).addStyleClass('surjShowMeCOFooter');},_formatMessage:function(m,f){var g=[];var t=m.split(/<a.*?>/);for(var i=0;i<t.length;++i){var j=t[i];if(j){j=j.replace(/<br\/>/g,'\n');var k=j.split(/<\/a>/);if(k.length>1){g.push(new L({text:k[0],press:f}));g.push(new T({text:k[1]}));}else{g.push(new T({text:j}));}}}return g;}});});
